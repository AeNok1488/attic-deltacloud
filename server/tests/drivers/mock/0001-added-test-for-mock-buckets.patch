From 60143df59652ffa6fe75fdb3c1d8350bd1bccd9a Mon Sep 17 00:00:00 2001
From: njerichelimo <martha.c.chumo@gmail.com>
Date: Sat, 24 Nov 2012 19:33:27 +0300
Subject: [PATCH] added test for mock buckets

---
 server/tests/drivers/mock/buckets_test.rb |   18 ++++++++++++++++++
 1 file changed, 18 insertions(+)
 create mode 100644 server/tests/drivers/mock/buckets_test.rb

diff --git a/server/tests/drivers/mock/buckets_test.rb b/server/tests/drivers/mock/buckets_test.rb
new file mode 100644
index 0000000..5b46aac
--- /dev/null
+++ b/server/tests/drivers/mock/buckets_test.rb
@@ -0,0 +1,18 @@
+require 'minitest/autorun'
+
+require_relative File.join('..', '..', '..', 'lib', 'deltacloud', 'api.rb')
+require_relative 'common.rb'
+
+describe 'MockDriver Buckets' do
+
+  before do
+    @driver = Deltacloud::new(:mock, :user => 'mockuser', :password => 'mockpassword')
+  end
+
+  it 'must throw error when wrong credentials for buckets' do
+    Proc.new do
+      @driver.backend.buckets(OpenStruct.new(:user => 'unknown', :password => 'wrong'))
+    end.must_raise Deltacloud::Exceptions::AuthenticationFailure, 'Authentication Failure'
+  end
+
+end
-- 
1.7.9.5

